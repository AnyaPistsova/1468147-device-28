var buttonopen=document.querySelector(".button-open"),popup=document.querySelector(".contact-us"),close=popup.querySelector(".button-close"),form=popup.querySelector(".contact-form"),namefield=popup.querySelector(".name-input"),emailfield=popup.querySelector(".email-input"),textfield=popup.querySelector(".contact-textarea"),mapopen=document.querySelector(".map"),mappopup=document.querySelector(".big-map"),mapclose=document.querySelector(".button-close-map"),isStorageSupport=!0,storagename="",storageemail="";try{storagename=localStorage.getItem("namefield"),storageemail=localStorage.getItem("emailfield")}catch(e){isStorageSupport=!1}buttonopen.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("contact-us-open"),storagename?(namefield.value=storagename,textfield.focus()):namefield.focus()}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("contact-us-open"),popup.classList.remove("for-error")}),form.addEventListener("submit",function(e){namefield.value&&emailfield.value&&textfield.value?isStorageSupport&&(localStorage.setItem("namefield",namefield.value),localStorage.setItem("emailfield",emailfield.value)):(e.preventDefault(),console.log("Заполните все поля"),popup.classList.remove("modal-error"),popup.offsetWidth,popup.classList.add("for-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&popup&&popup.classList.contains("contact-us-open")&&(e.preventDefault(),popup.classList.remove("contact-us-open"),popup.classList.remove("for-error"))}),mapopen.addEventListener("click",function(e){e.preventDefault(),mappopup.classList.add("big-map-open")}),mapclose.addEventListener("click",function(e){e.preventDefault(),mappopup.classList.remove("big-map-open")}),window.addEventListener("keydown",function(e){27===e.keyCode&&mappopup&&mappopup.classList.contains("big-map-open")&&(e.preventDefault(),mappopup.classList.remove("big-map-open"))});